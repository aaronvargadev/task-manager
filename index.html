<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <nav>
            <a href="index.html" class="logo">Task Manager</a>
            <div id="user-status">
                <!-- This will be populated by script.js -->
            </div>
        </nav>
        <div class="add-task-form">
            <input type="text" id="new-task-title" placeholder="New Task Title">
            <button id="add-button">Add&nbsp;Task</button>
        </div>
    </header>
    <main>
        <h3>Tasks</h3>
        <div id="task-list">
            <!-- Active tasks will be rendered here -->
        </div>

        <details class="completed-tasks-container">
            <summary>Completed Tasks</summary>
            <div id="completed-task-list">
                <!-- Completed tasks will be rendered here -->
            </div>
        </details>
    </main>
    <footer>
        <p>Developed by Aaron Varga</p>
    </footer>
    <div id="delete-confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Are you sure?</h2>
            <p>This action is irreversible. All your tasks will be permanently deleted.</p>
            <div class="modal-actions">
                <button id="confirm-delete-btn">Yes, Delete My Account</button>
                <button id="cancel-delete-btn">Cancel</button>
            </div>
        </div>
    </div>
    <script src="script.js" type="module" defer></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>

</html>